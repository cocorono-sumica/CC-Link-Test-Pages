<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webã‚µãƒ¼ãƒãƒ¼è¨­å®šã‚¬ã‚¤ãƒ‰ - Apache/Nginxè¨­å®šä¾‹</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 900px; margin: 50px auto; padding: 20px; background: #f9f9f9; }
        h1 { color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; }
        .back-link { display: inline-block; margin-bottom: 20px; padding: 8px 16px; background: #667eea; color: white; text-decoration: none; border-radius: 4px; }
        .content { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        pre { background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto; font-size: 13px; }
        .config-section { background: #f5f5f5; border: 1px solid #ddd; padding: 20px; margin: 20px 0; border-radius: 5px; }
        .config-section h3 { color: #667eea; margin-top: 0; }
        .note { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 15px 0; border-radius: 4px; }
    </style>
</head>
<body>
    <a href="soft-error-false-positive.html" class="back-link">â† ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>

    <h1>Webã‚µãƒ¼ãƒãƒ¼è¨­å®šã‚¬ã‚¤ãƒ‰</h1>

    <div class="content">
        <h2>Apache (.htaccess) è¨­å®šä¾‹</h2>

        <div class="config-section">
            <h3>ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã®è¨­å®š</h3>
            <pre>
# .htaccess ãƒ•ã‚¡ã‚¤ãƒ«

# 404ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
ErrorDocument 404 /error/404.html

# 403ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
ErrorDocument 403 /error/403.html

# 500ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
ErrorDocument 500 /error/500.html

# 401ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
ErrorDocument 401 /error/401.html
            </pre>
        </div>

        <div class="config-section">
            <h3>ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®š</h3>
            <pre>
# 301ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼ˆæ’ä¹…çš„ï¼‰
Redirect 301 /old-page.html /new-page.html

# ã™ã¹ã¦ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’HTTPSã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# wwwæœ‰ã‚Šã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
RewriteCond %{HTTP_HOST} ^example\.com [NC]
RewriteRule ^(.*)$ https://www.example.com/$1 [L,R=301]
            </pre>
        </div>

        <h2>Nginx è¨­å®šä¾‹</h2>

        <div class="config-section">
            <h3>ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã¨ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ</h3>
            <pre>
server {
    listen 80;
    server_name example.com;

    # ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸
    error_page 404 /error/404.html;
    error_page 403 /error/403.html;
    error_page 500 502 503 504 /error/50x.html;

    # é™çš„ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã®é…ä¿¡
    location /error/ {
        internal;
        root /var/www/html;
    }

    # 301ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    location /old-path {
        return 301 /new-path;
    }

    # HTTPSã¸ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    return 301 https://$server_name$request_uri;
}
            </pre>
        </div>

        <div class="note">
            <h3>ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ</h3>
            <ul>
                <li>ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã«ã¯ã€Œãƒšãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€ç­‰ã®åˆ†ã‹ã‚Šã‚„ã™ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¾ã—ã‚‡ã†</li>
                <li>403 Forbidden ã‚¨ãƒ©ãƒ¼ã§ã¯ã€Œã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€ã¨è¡¨ç¤ºã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™</li>
                <li>404ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã«ã¯ã‚µã‚¤ãƒˆå†…æ¤œç´¢æ©Ÿèƒ½ã‚’è¨­ç½®ã™ã‚‹ã¨ä¾¿åˆ©ã§ã™</li>
            </ul>
        </div>

        <h2>Node.js Express ã§ã®è¨­å®šä¾‹</h2>
        <pre>
const express = require('express');
const app = express();

// 404ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
app.use((req, res, next) => {
    res.status(404).send('ãƒšãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
});

// 500ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
app.use((err, req, res, next) => {
    console.error(err.stack);
    res.status(500).send('ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
});
        </pre>

        <h2>ã¾ã¨ã‚</h2>
        <p>
            é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸è¨­å®šã¨ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®šã«ã‚ˆã‚Šã€
            ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã¨SEOã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
            ç‰¹ã« 404 Not Found ã‚„ 403 Forbidden ãªã©ã®
            ä¸€èˆ¬çš„ãªã‚¨ãƒ©ãƒ¼ã«ã¯å¿…ãšã‚«ã‚¹ã‚¿ãƒ ãƒšãƒ¼ã‚¸ã‚’ç”¨æ„ã—ã¾ã—ã‚‡ã†ã€‚
        </p>
    </div>
</body>
</html>
