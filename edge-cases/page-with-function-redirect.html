<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>関数内リダイレクトコード - テストページ</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; background: #f9f9f9; }
        h1 { color: #333; border-bottom: 2px solid #667eea; padding-bottom: 10px; }
        .back-link { display: inline-block; margin-bottom: 20px; padding: 8px 16px; background: #667eea; color: white; text-decoration: none; border-radius: 4px; }
        .content { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        pre { background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto; }
        .note { background: #e8f5e9; border-left: 4px solid #4caf50; padding: 15px; margin: 20px 0; border-radius: 4px; }
        button { padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: #5568d6; }
    </style>
    <script>
        // これらの関数定義は即座には実行されない
        // リダイレクト検出の誤検知テスト用

        function doRedirect() {
            // この関数はボタンクリック時のみ実行される
            location.href = '../index.html';
        }

        function navigateToPage(url) {
            // パラメータ付きリダイレクト関数
            window.location.href = url;
        }

        function redirectWithConfirm() {
            if (confirm('ダッシュボードに移動しますか？')) {
                location.href = '../index.html';
            }
        }

        // 条件付きリダイレクト関数
        function conditionalRedirect(condition) {
            if (condition) {
                window.location = '../index.html';
            }
        }

        // アロー関数でのリダイレクト
        const arrowRedirect = () => {
            location.href = '../index.html';
        };
    </script>
</head>
<body>
    <a href="redirect-false-positive.html" class="back-link">← テストページに戻る</a>

    <h1>関数内リダイレクトコード - テストページ</h1>

    <div class="content">
        <h2>このページについて</h2>
        <p>
            このページには<strong>関数定義内</strong>に<code>location.href</code>コードが含まれていますが、
            ページロード時には<strong>リダイレクトは発生しません</strong>。
        </p>

        <div class="note">
            <strong>✅ 期待される検出結果:</strong> リダイレクトとして検出<strong>されない</strong>
        </div>

        <h2>含まれている関数定義</h2>
        <pre>
function doRedirect() {
    location.href = '../index.html';
}

function navigateToPage(url) {
    window.location.href = url;
}

function redirectWithConfirm() {
    if (confirm('移動しますか？')) {
        location.href = '../index.html';
    }
}

const arrowRedirect = () => {
    location.href = '../index.html';
};
        </pre>

        <h2>動作テスト（手動実行）</h2>
        <p>以下のボタンをクリックすると、上記の関数が実行されます：</p>
        <button onclick="doRedirect()">doRedirect()を実行</button>
        <button onclick="redirectWithConfirm()">確認付きリダイレクト</button>

        <h2>検証ポイント</h2>
        <ul style="line-height: 1.8;">
            <li>このページへのリンクをチェックしても「リダイレクト検出」とならないこと</li>
            <li>関数定義内のコードは即座に実行されないことを理解した検出ロジック</li>
            <li><code>function</code>キーワードや<code>const fn = () =></code>形式の除外</li>
        </ul>
    </div>
</body>
</html>
